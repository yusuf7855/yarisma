<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpectraLoop Final v3.2 - Motor Control System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">SPECTRALOOP FINAL v3.2 - PRODUCTION</div>
        <div class="subtitle">Production Motor Control System - Levitation(1-4) Thrust(5-6) - Temperature Safety</div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Panel - Individual Motor Controls -->
        <div class="control-panel">
            <div class="panel-title">üéõÔ∏è ƒ∞ndivid√ºel Motor Kontrolleri</div>
            
            <!-- Temperature Section - NEW -->
            <div class="temperature-section" id="temperature-section">
                <div class="temperature-header">
                    <h4>üå°Ô∏è Sistem Sƒ±caklƒ±ƒüƒ±</h4>
                    <div class="temp-emergency-indicator" id="temp-emergency" style="display: none;">
                        <span class="emergency-text">ALARM!</span>
                    </div>
                </div>
                
                <div class="temperature-main">
                    <div class="temp-reading-container">
                        <div class="temp-current" id="temp-current">25.0¬∞C</div>
                        <div class="temp-status-text" id="temp-status-text">G√ºvenli</div>
                    </div>
                    
                    <div class="temp-details">
                        <div class="temp-detail-item">
                            <span class="temp-label">Max:</span>
                            <span class="temp-value" id="temp-max">25.0¬∞C</span>
                        </div>
                        <div class="temp-detail-item">
                            <span class="temp-label">Alarm:</span>
                            <span class="temp-value" id="temp-alarm-count">0</span>
                        </div>
                        <div class="temp-detail-item">
                            <span class="temp-label">Buzzer:</span>
                            <span class="temp-value" id="buzzer-status">Pasif</span>
                        </div>
                    </div>
                </div>
                
                <div class="temp-thresholds">
                    <div class="threshold-item safe">
                        <div class="threshold-label">G√ºvenli</div>
                        <div class="threshold-value">&lt; 50¬∞C</div>
                    </div>
                    <div class="threshold-item warning">
                        <div class="threshold-label">Uyarƒ±</div>
                        <div class="threshold-value">50-55¬∞C</div>
                    </div>
                    <div class="threshold-item danger">
                        <div class="threshold-label">Tehlike</div>
                        <div class="threshold-value">‚â• 55¬∞C</div>
                    </div>
                </div>
                
                <div class="temp-controls">
                    <button class="buzzer-btn" id="buzzer-off-btn" onclick="turnOffBuzzer()" disabled>
                        üîá Buzzer Kapat
                    </button>
                    <div class="temp-last-update">
                        Son g√ºncelleme: <span id="temp-last-update">--:--:--</span>
                    </div>
                </div>
            </div>
            
            <!-- System Status -->
            <div class="system-status">
                <div class="status-item">
                    <div class="status-label">Arduino</div>
                    <div class="status-value status-connected" id="arduino-status">Baƒülƒ±</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Sistem</div>
                    <div class="status-value status-armed" id="system-status">Hazƒ±r</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Aktif</div>
                    <div class="status-value" id="motor-count">0/6</div>
                </div>
                <div class="status-item">
                    <div class="status-label">R√∂le</div>
                    <div class="status-value" id="relay-status">Pasif</div>
                </div>
            </div>

            <!-- Arming Section -->
            <div class="arm-section">
                <button class="arm-button" id="arm-button" onclick="toggleArm()">
                    üîß Sƒ∞STEMƒ∞ HAZIRLA
                </button>
            </div>

            <!-- Individual Motor Cards -->
            <div class="individual-motors">
                <div class="motor-card" data-motor="1">
                    <div class="motor-header">
                        <span class="motor-label">Motor 1 (Lev-Pin2)</span>
                        <span class="motor-status off" id="motor1-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(1)" id="motor1-start">‚ñ∂</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(1)" id="motor1-stop">‚èπ</button>
                        <input type="number" class="speed-input" id="motor1-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(1, this.value)">
                    </div>
                    <div class="speed-display" id="motor1-speed-display">Hƒ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="2">
                    <div class="motor-header">
                        <span class="motor-label">Motor 2 (Lev-Pin4)</span>
                        <span class="motor-status off" id="motor2-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(2)" id="motor2-start">‚ñ∂</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(2)" id="motor2-stop">‚èπ</button>
                        <input type="number" class="speed-input" id="motor2-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(2, this.value)">
                    </div>
                    <div class="speed-display" id="motor2-speed-display">Hƒ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="3">
                    <div class="motor-header">
                        <span class="motor-label">Motor 3 (Lev-Pin5)</span>
                        <span class="motor-status off" id="motor3-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(3)" id="motor3-start">‚ñ∂</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(3)" id="motor3-stop">‚èπ</button>
                        <input type="number" class="speed-input" id="motor3-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(3, this.value)">
                    </div>
                    <div class="speed-display" id="motor3-speed-display">Hƒ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="4">
                    <div class="motor-header">
                        <span class="motor-label">Motor 4 (Lev-Pin6)</span>
                        <span class="motor-status off" id="motor4-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(4)" id="motor4-start">‚ñ∂</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(4)" id="motor4-stop">‚èπ</button>
                        <input type="number" class="speed-input" id="motor4-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(4, this.value)">
                    </div>
                    <div class="speed-display" id="motor4-speed-display">Hƒ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="5">
                    <div class="motor-header">
                        <span class="motor-label">Motor 5 (Thr-Pin3)</span>
                        <span class="motor-status off" id="motor5-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(5)" id="motor5-start">‚ñ∂</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(5)" id="motor5-stop">‚èπ</button>
                        <input type="number" class="speed-input" id="motor5-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(5, this.value)">
                    </div>
                    <div class="speed-display" id="motor5-speed-display">Hƒ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="6">
                    <div class="motor-header">
                        <span class="motor-label">Motor 6 (Thr-Pin7)</span>
                        <span class="motor-status off" id="motor6-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(6)" id="motor6-start">‚ñ∂</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(6)" id="motor6-stop">‚èπ</button>
                        <input type="number" class="speed-input" id="motor6-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(6, this.value)">
                    </div>
                    <div class="speed-display" id="motor6-speed-display">Hƒ±z: 0%</div>
                </div>
            </div>
        </div>

        <!-- Middle Panel - Group Controls -->
        <div class="control-panel">
            <div class="panel-title">üöÄ Grup Kontrolleri</div>
            
            <!-- Levitation Group -->
            <div class="group-control">
                <div class="group-title">üîÆ Levitasyon Grubu (M1,2,3,4)</div>
                <div class="group-info">Pin: 2,4,5,6 - Levitation Motors</div>
                <div class="group-speed-control">
                    <button class="speed-btn" onclick="adjustGroupSpeed('levitation', -10)">‚àí</button>
                    <input type="range" class="speed-slider" id="levitation-slider" 
                           min="0" max="100" value="0" 
                           oninput="setGroupSpeed('levitation', this.value)">
                    <button class="speed-btn" onclick="adjustGroupSpeed('levitation', 10)">+</button>
                    <span class="speed-value" id="levitation-speed">0%</span>
                </div>
                <div class="group-buttons">
                    <button class="group-btn start-btn" onclick="startGroup('levitation')">üöÄ BA≈ûLAT</button>
                    <button class="group-btn stop-btn" onclick="stopGroup('levitation')">‚èπ DURDUR</button>
                </div>
            </div>

            <!-- Thrust Group -->
            <div class="group-control">
                <div class="group-title">‚ö° ƒ∞tki Grubu (M5,6)</div>
                <div class="group-info">Pin: 3,7 - Thrust Motors</div>
                <div class="group-speed-control">
                    <button class="speed-btn" onclick="adjustGroupSpeed('thrust', -10)">‚àí</button>
                    <input type="range" class="speed-slider" id="thrust-slider" 
                           min="0" max="100" value="0" 
                           oninput="setGroupSpeed('thrust', this.value)">
                    <button class="speed-btn" onclick="adjustGroupSpeed('thrust', 10)">+</button>
                    <span class="speed-value" id="thrust-speed">0%</span>
                </div>
                <div class="group-buttons">
                    <button class="group-btn start-btn" onclick="startGroup('thrust')">‚ö° BA≈ûLAT</button>
                    <button class="group-btn stop-btn" onclick="stopGroup('thrust')">‚èπ DURDUR</button>
                </div>
            </div>

            <!-- System Controls -->
            <div class="system-controls">
                <h4 class="controls-title">üîß Sistem Kontrolleri</h4>
                <div class="control-grid">
                    <button class="system-btn relay-brake-on" onclick="controlRelayBrake('on')">
                        üîå R√ñLE AKTƒ∞F
                    </button>
                    <button class="system-btn relay-brake-off" onclick="controlRelayBrake('off')">
                        ‚ö° R√ñLE PASƒ∞F
                    </button>
                    <button class="system-btn brake-on" onclick="controlBrake('on')">
                        üîí SW BRAKE ON
                    </button>
                    <button class="system-btn brake-off" onclick="controlBrake('off')">
                        üîì SW BRAKE OFF
                    </button>
                    <button class="system-btn emergency-btn" onclick="emergencyStop()">
                        üö® ACƒ∞L DURDURMA
                    </button>
                </div>
            </div>
        </div>

        <!-- Right Panel - System Info -->
        <div class="control-panel">
            <div class="panel-title">üìä Sistem Bilgileri</div>
            
            <!-- Temperature Info Section - Enhanced -->
            <div class="info-section">
                <h4 class="section-title">üå°Ô∏è Sƒ±caklƒ±k Detaylarƒ±</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Mevcut</div>
                        <div class="info-value temp-value" id="detailed-temp-current">25.0¬∞C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Durum</div>
                        <div class="info-value" id="detailed-temp-status">G√ºvenli</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Maximum</div>
                        <div class="info-value" id="detailed-temp-max">25.0¬∞C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Alarm Sayƒ±sƒ±</div>
                        <div class="info-value" id="detailed-alarm-count">0</div>
                    </div>
                </div>
            </div>
            
            <!-- Performance Info -->
            <div class="info-section">
                <h4 class="section-title">üìà Performans</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Toplam RPM</div>
                        <div class="info-value rpm-value" id="total-rpm">0</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">G√º√ß T√ºketimi</div>
                        <div class="info-value power-value" id="power-usage">0W</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Sistem Sƒ±caklƒ±k</div>
                        <div class="info-value temp-value" id="system-temperature">25¬∞C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">R√∂le Durumu</div>
                        <div class="info-value relay-value" id="relay-brake-status">Pasif</div>
                    </div>
                </div>
            </div>

            <!-- Motor Speed Summary -->
            <div class="info-section">
                <h4 class="section-title">‚öôÔ∏è Motor Durumu</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Lev Grubu Ort.</div>
                        <div class="info-value speed-value" id="lev-avg-speed">0%</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ƒ∞tki Grubu Ort.</div>
                        <div class="info-value speed-value" id="thr-avg-speed">0%</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Aktif Motorlar</div>
                        <div class="info-value motor-value" id="active-motors">0/6</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Toplam Hƒ±z</div>
                        <div class="info-value total-speed-value" id="total-speed">0%</div>
                    </div>
                </div>
            </div>

            <!-- Connection Status -->
            <div class="info-section">
                <h4 class="section-title">üîó Baƒülantƒ± Durumu</h4>
                <div class="connection-status">
                    <div class="connection-item">
                        <span class="connection-label">Backend:</span>
                        <div class="connection-dot" id="backend-status"></div>
                        <span class="connection-text" id="backend-text">Baƒülantƒ±sƒ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">Arduino:</span>
                        <div class="connection-dot" id="arduino-connection-status"></div>
                        <span class="connection-text" id="arduino-text">Baƒülantƒ±sƒ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">Son G√ºncelleme:</span>
                        <span class="update-time" id="last-update">--:--:--</span>
                    </div>
                </div>
                
                <div class="connection-controls">
                    <button class="connection-btn test-btn" onclick="testConnection()">
                        üîç BAƒûLANTI TESTƒ∞
                    </button>
                    <button class="connection-btn reconnect-btn" onclick="reconnectArduino()">
                        üîÑ YENƒ∞DEN BAƒûLAN
                    </button>
                </div>
            </div>

            <!-- Command Log -->
            <div class="info-section">
                <h4 class="section-title">üìù Komut Ge√ßmi≈üi</h4>
                <div id="command-log" class="command-log">
                    <div class="log-entry">Sistem ba≈ülatƒ±lƒ±yor...</div>
                </div>
            </div>

            <!-- System Stats -->
            <div class="info-section">
                <h4 class="section-title">üìä ƒ∞statistikler</h4>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Komutlar:</span>
                        <span class="stat-value" id="total-commands">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Hatalar:</span>
                        <span class="stat-value error-stat" id="total-errors">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Uptime:</span>
                        <span class="stat-value" id="uptime">0s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Port:</span>
                        <span class="stat-value" id="arduino-port">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Stop Button -->
    <div class="emergency-stop" onclick="emergencyStop()">
        <div class="emergency-icon">üö®</div>
        <div class="emergency-text">STOP</div>
    </div>

    <!-- Temperature Emergency Warning -->
    <div class="temperature-emergency-warning" id="temperature-emergency-warning" style="display: none;">
        <div class="warning-content">
            <div class="warning-icon">üå°Ô∏èüö®</div>
            <div class="warning-text">
                <div class="warning-title">SICAKLIK ALARMI!</div>
                <div class="warning-subtitle">Sistem g√ºvenlik nedeniyle durduruldu</div>
                <div class="warning-temp">Sƒ±caklƒ±k: <span id="warning-temp-value">--¬∞C</span></div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <span class="notification-icon" id="notification-icon">‚ÑπÔ∏è</span>
            <span class="notification-message" id="notification-message">Mesaj</span>
        </div>
        <button class="notification-close" onclick="closeNotification()">√ó</button>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Sistem ba≈ülatƒ±lƒ±yor...</div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>