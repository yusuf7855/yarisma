<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpectraLoop v3.6 - DUAL Temperature + Reflector Counter System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">SPECTRALOOP v3.6 - DUAL TEMP + REFLECTOR PRODUCTION</div>
        <div class="subtitle">Production Motor Control System - Levitation(1-4) Thrust(5-6) - DUAL Temperature Safety + Ultra-Fast Reflector Counter</div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Panel - Individual Motor Controls + Temperature -->
        <div class="control-panel">
            <div class="panel-title">ğŸ›ï¸ Ä°ndividÃ¼el Motor Kontrolleri</div>
            
            <!-- DUAL Temperature Section - ENHANCED -->
            <div class="temperature-section" id="temperature-section">
                <div class="temperature-header">
                    <h4>ğŸŒ¡ï¸ Ã‡IFT SensÃ¶r SÄ±caklÄ±ÄŸÄ±</h4>
                    <div class="temp-emergency-indicator" id="temp-emergency" style="display: none;">
                        <span class="emergency-text">ALARM!</span>
                    </div>
                </div>
                
                <!-- DUAL SENSOR MAIN DISPLAY -->
                <div class="temperature-main">
                    <!-- Primary Sensor (Pin 8) -->
                    <div class="sensor-reading primary" id="sensor1-reading">
                        <div class="sensor-label">SensÃ¶r 1 (Pin 8)</div>
                        <div class="temp-current primary" id="sensor1-temp">25.0Â°C</div>
                        <div class="sensor-connection-status">
                            <span id="sensor1-status-mini" class="sensor-connection-mini connected">â—</span>
                            <span id="sensor1-status-text">BaÄŸlÄ±</span>
                        </div>
                    </div>
                    
                    <!-- Secondary Sensor (Pin 13) -->
                    <div class="sensor-reading secondary" id="sensor2-reading">
                        <div class="sensor-label">SensÃ¶r 2 (Pin 13)</div>
                        <div class="temp-current secondary" id="sensor2-temp">25.0Â°C</div>
                        <div class="sensor-connection-status">
                            <span id="sensor2-status-mini" class="sensor-connection-mini connected">â—</span>
                            <span id="sensor2-status-text">BaÄŸlÄ±</span>
                        </div>
                    </div>
                    
                    <!-- Safety Temperature (Max) -->
                    <div class="sensor-reading safety" id="safety-reading">
                        <div class="sensor-label">GÃ¼venlik (Max)</div>
                        <div class="temp-current safety" id="safety-temp">25.0Â°C</div>
                        <div class="temp-status">
                            <span id="temp-status-text">GÃ¼venli</span>
                        </div>
                    </div>
                </div>
                
                <!-- DUAL SENSOR DETAILS -->
                <div class="dual-sensor-details">
                    <div class="sensor-detail-group">
                        <h5>SensÃ¶r 1 DetaylarÄ±</h5>
                        <div class="sensor-detail-item">
                            <span class="sensor-detail-label">Max:</span>
                            <span class="sensor-detail-value" id="sensor1-max">25.0Â°C</span>
                        </div>
                        <div class="sensor-detail-item">
                            <span class="sensor-detail-label">BaÄŸlantÄ±:</span>
                            <span class="sensor-detail-value" id="sensor1-connection">BaÄŸlÄ±</span>
                        </div>
                    </div>
                    <div class="sensor-detail-group">
                        <h5>SensÃ¶r 2 DetaylarÄ±</h5>
                        <div class="sensor-detail-item">
                            <span class="sensor-detail-label">Max:</span>
                            <span class="sensor-detail-value" id="sensor2-max">25.0Â°C</span>
                        </div>
                        <div class="sensor-detail-item">
                            <span class="sensor-detail-label">BaÄŸlantÄ±:</span>
                            <span class="sensor-detail-value" id="sensor2-connection">BaÄŸlÄ±</span>
                        </div>
                    </div>
                </div>
                
                <!-- TEMPERATURE DIFFERENCE WARNING -->
                <div class="temp-difference-warning" id="temp-difference-warning" style="display: none;">
                    <div class="temp-diff-text">
                        âš ï¸ BÃ¼yÃ¼k SensÃ¶r FarkÄ± Tespit Edildi! Fark: <span id="temp-difference-value">0.0Â°C</span>
                    </div>
                </div>
                
                <!-- REDUNDANCY STATUS -->
                <div class="redundancy-status">
                    <div class="redundancy-label">SensÃ¶r Redundancy:</div>
                    <div class="redundancy-value" id="sensor-redundancy-status">Ã‡ift Aktif</div>
                </div>
                
                <!-- TEMPERATURE CONTROLS -->
                <div class="temp-controls">
                    <button class="buzzer-btn" id="buzzer-off-btn" onclick="turnOffBuzzer()" disabled>
                        ğŸ”‡ Buzzer Kapat
                    </button>
                    <button class="sensor-detail-btn" onclick="showSensorDetails()">
                        ğŸ“Š SensÃ¶r DetaylarÄ±
                    </button>
                    <div class="temp-last-update">
                        Son gÃ¼ncelleme: <span id="temp-last-update">--:--:--</span>
                    </div>
                </div>
            </div>

            <!-- NEW: REFLECTOR COUNTER SECTION -->
            <div class="reflector-section" id="reflector-section">
                <div class="reflector-header">
                    <h4>ğŸ“ Omron Reflektor SayacÄ±</h4>
                    <div class="reflector-status-indicator" id="reflector-status" style="display: none;">
                        <span class="status-text">AKTIF</span>
                    </div>
                </div>
                
                <!-- REFLECTOR MAIN DISPLAY -->
                <div class="reflector-main">
                    <div class="reflector-count-display">
                        <div class="count-label">Toplam SayÄ±m</div>
                        <div class="count-current" id="reflector-count">0</div>
                        <div class="count-status">
                            <span id="reflector-system-status">Aktif</span>
                            <span id="reflector-connection-mini" class="sensor-connection-mini connected">â—</span>
                        </div>
                    </div>
                    
                    <div class="reflector-voltage-display">
                        <div class="voltage-label">SensÃ¶r VoltajÄ±</div>
                        <div class="voltage-current" id="reflector-voltage">5.00V</div>
                        <div class="voltage-status">
                            <span id="reflector-detection-state">Temiz</span>
                        </div>
                    </div>
                    
                    <div class="reflector-speed-display">
                        <div class="speed-label">Ortalama HÄ±z</div>
                        <div class="speed-current" id="reflector-avg-speed">0.0</div>
                        <div class="speed-unit">ref/dk</div>
                    </div>
                </div>
                
                <!-- REFLECTOR DETAILED INFO -->
                <div class="reflector-details">
                    <div class="reflector-detail-group">
                        <h5>Performans</h5>
                        <div class="reflector-detail-item">
                            <span class="reflector-detail-label">AnlÄ±k HÄ±z:</span>
                            <span class="reflector-detail-value" id="reflector-instant-speed">0.0 ref/dk</span>
                        </div>
                        <div class="reflector-detail-item">
                            <span class="reflector-detail-label">Okuma Frek:</span>
                            <span class="reflector-detail-value" id="reflector-read-freq">0.0 Hz</span>
                        </div>
                        <div class="reflector-detail-item">
                            <span class="reflector-detail-label">Max HÄ±z:</span>
                            <span class="reflector-detail-value" id="reflector-max-speed">0.0 ref/dk</span>
                        </div>
                    </div>
                    <div class="reflector-detail-group">
                        <h5>Ä°statistikler</h5>
                        <div class="reflector-detail-item">
                            <span class="reflector-detail-label">Oturum:</span>
                            <span class="reflector-detail-value" id="reflector-session-count">0</span>
                        </div>
                        <div class="reflector-detail-item">
                            <span class="reflector-detail-label">GÃ¼nlÃ¼k:</span>
                            <span class="reflector-detail-value" id="reflector-daily-count">0</span>
                        </div>
                        <div class="reflector-detail-item">
                            <span class="reflector-detail-label">Ã‡alÄ±ÅŸma:</span>
                            <span class="reflector-detail-value" id="reflector-runtime">0.0 dk</span>
                        </div>
                    </div>
                </div>
                
                <!-- REFLECTOR CONTROLS -->
                <div class="reflector-controls">
                    <button class="reflector-btn reset-btn" onclick="resetReflectorCounter()">
                        ğŸ”„ SayacÄ± SÄ±fÄ±rla
                    </button>
                    <button class="reflector-btn calibrate-btn" onclick="calibrateReflectorSensor()">
                        ğŸ¯ Kalibre Et
                    </button>
                    <button class="reflector-btn detail-btn" onclick="showReflectorDetails()">
                        ğŸ“ˆ DetaylÄ± Ä°statistik
                    </button>
                    <div class="reflector-last-update">
                        Son sayÄ±m: <span id="reflector-last-update">--:--:--</span>
                    </div>
                </div>
            </div>
            
            <!-- System Status -->
            <div class="system-status">
                <div class="status-item">
                    <div class="status-label">Arduino</div>
                    <div class="status-value status-connected" id="arduino-status">BaÄŸlÄ±</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Sistem</div>
                    <div class="status-value status-armed" id="system-status">HazÄ±r</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Aktif Motor</div>
                    <div class="status-value" id="motor-count">0/6</div>
                </div>
                <div class="status-item">
                    <div class="status-label">RÃ¶le</div>
                    <div class="status-value" id="relay-status">Pasif</div>
                </div>
            </div>

            <!-- Arming Section -->
            <div class="arm-section">
                <button class="arm-button" id="arm-button" onclick="toggleArm()">
                    ğŸ”§ SÄ°STEMÄ° HAZIRLA
                </button>
            </div>

            <!-- Individual Motor Cards -->
            <div class="individual-motors">
                <div class="motor-card" data-motor="1">
                    <div class="motor-header">
                        <span class="motor-label">Motor 1 (Lev-Pin2)</span>
                        <span class="motor-status off" id="motor1-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(1)" id="motor1-start">â–¶</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(1)" id="motor1-stop">â¹</button>
                        <input type="number" class="speed-input" id="motor1-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(1, this.value)">
                    </div>
                    <div class="speed-display" id="motor1-speed-display">HÄ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="2">
                    <div class="motor-header">
                        <span class="motor-label">Motor 2 (Lev-Pin4)</span>
                        <span class="motor-status off" id="motor2-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(2)" id="motor2-start">â–¶</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(2)" id="motor2-stop">â¹</button>
                        <input type="number" class="speed-input" id="motor2-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(2, this.value)">
                    </div>
                    <div class="speed-display" id="motor2-speed-display">HÄ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="3">
                    <div class="motor-header">
                        <span class="motor-label">Motor 3 (Lev-Pin5)</span>
                        <span class="motor-status off" id="motor3-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(3)" id="motor3-start">â–¶</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(3)" id="motor3-stop">â¹</button>
                        <input type="number" class="speed-input" id="motor3-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(3, this.value)">
                    </div>
                    <div class="speed-display" id="motor3-speed-display">HÄ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="4">
                    <div class="motor-header">
                        <span class="motor-label">Motor 4 (Lev-Pin6)</span>
                        <span class="motor-status off" id="motor4-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(4)" id="motor4-start">â–¶</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(4)" id="motor4-stop">â¹</button>
                        <input type="number" class="speed-input" id="motor4-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(4, this.value)">
                    </div>
                    <div class="speed-display" id="motor4-speed-display">HÄ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="5">
                    <div class="motor-header">
                        <span class="motor-label">Motor 5 (Thr-Pin3)</span>
                        <span class="motor-status off" id="motor5-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(5)" id="motor5-start">â–¶</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(5)" id="motor5-stop">â¹</button>
                        <input type="number" class="speed-input" id="motor5-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(5, this.value)">
                    </div>
                    <div class="speed-display" id="motor5-speed-display">HÄ±z: 0%</div>
                </div>

                <div class="motor-card" data-motor="6">
                    <div class="motor-header">
                        <span class="motor-label">Motor 6 (Thr-Pin7)</span>
                        <span class="motor-status off" id="motor6-status">OFF</span>
                    </div>
                    <div class="motor-controls">
                        <button class="motor-btn start-btn" onclick="startMotor(6)" id="motor6-start">â–¶</button>
                        <button class="motor-btn stop-btn" onclick="stopMotor(6)" id="motor6-stop">â¹</button>
                        <input type="number" class="speed-input" id="motor6-speed-input" min="0" max="100" value="50" onchange="setMotorSpeed(6, this.value)">
                    </div>
                    <div class="speed-display" id="motor6-speed-display">HÄ±z: 0%</div>
                </div>
            </div>
        </div>

        <!-- Middle Panel - Group Controls + Reflector Statistics -->
        <div class="control-panel">
            <div class="panel-title">ğŸš€ Grup Kontrolleri + Reflektor Ä°statistik</div>
            
            <!-- NEW: REFLECTOR STATISTICS SECTION -->
            <div class="reflector-stats-section">
                <div class="stats-title">ğŸ“Š Reflektor Performans Ä°statistikleri</div>
                
                <!-- Real-time Performance Chart Area -->
                <div class="performance-chart-area">
                    <div class="chart-header">
                        <h5>GerÃ§ek ZamanlÄ± HÄ±z GrafiÄŸi</h5>
                        <div class="chart-controls">
                            <button class="chart-btn" onclick="toggleSpeedChart()">ğŸ“ˆ Grafik</button>
                        </div>
                    </div>
                    <div class="mini-chart" id="reflector-speed-chart">
                        <canvas id="speed-chart-canvas" width="300" height="100"></canvas>
                    </div>
                </div>
                
                <!-- Statistics Grid -->
                <div class="reflector-stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Toplam SayÄ±m</div>
                        <div class="stat-value reflector-value" id="stats-total-count">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ortalama HÄ±z</div>
                        <div class="stat-value speed-value" id="stats-avg-speed">0.0 ref/dk</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ã‡alÄ±ÅŸma SÃ¼resi</div>
                        <div class="stat-value time-value" id="stats-runtime">0h 0m</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Verimlilik</div>
                        <div class="stat-value efficiency-value" id="stats-efficiency">100%</div>
                    </div>
                </div>
                
                <!-- Temperature vs Reflector Correlation -->
                <div class="correlation-display">
                    <div class="correlation-header">
                        <h5>ğŸŒ¡ï¸ SÄ±caklÄ±k - Reflektor Korelasyonu</h5>
                    </div>
                    <div class="correlation-data">
                        <div class="correlation-item">
                            <span class="correlation-label">SÄ±c./HÄ±z OranÄ±:</span>
                            <span class="correlation-value" id="temp-speed-ratio">0.0</span>
                        </div>
                        <div class="correlation-item">
                            <span class="correlation-label">Sistem YÃ¼kÃ¼:</span>
                            <span class="correlation-value" id="system-load-indicator">Normal</span>
                        </div>
                        <div class="correlation-item">
                            <span class="correlation-label">Performans:</span>
                            <span class="correlation-value" id="performance-indicator">Optimal</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Levitation Group -->
            <div class="group-control">
                <div class="group-title">ğŸ”® Levitasyon Grubu (M1,2,3,4)</div>
                <div class="group-info">Pin: 2,4,5,6 - Levitation Motors</div>
                <div class="group-speed-control">
                    <button class="speed-btn" onclick="adjustGroupSpeed('levitation', -10)">âˆ’</button>
                    <input type="range" class="speed-slider" id="levitation-slider" 
                           min="0" max="100" value="0" 
                           oninput="setGroupSpeed('levitation', this.value)">
                    <button class="speed-btn" onclick="adjustGroupSpeed('levitation', 10)">+</button>
                    <span class="speed-value" id="levitation-speed">0%</span>
                </div>
                <div class="group-buttons">
                    <button class="group-btn start-btn" onclick="startGroup('levitation')">ğŸš€ BAÅLAT</button>
                    <button class="group-btn stop-btn" onclick="stopGroup('levitation')">â¹ DURDUR</button>
                </div>
            </div>

            <!-- Thrust Group -->
            <div class="group-control">
                <div class="group-title">âš¡ Ä°tki Grubu (M5,6)</div>
                <div class="group-info">Pin: 3,7 - Thrust Motors</div>
                <div class="group-speed-control">
                    <button class="speed-btn" onclick="adjustGroupSpeed('thrust', -10)">âˆ’</button>
                    <input type="range" class="speed-slider" id="thrust-slider" 
                           min="0" max="100" value="0" 
                           oninput="setGroupSpeed('thrust', this.value)">
                    <button class="speed-btn" onclick="adjustGroupSpeed('thrust', 10)">+</button>
                    <span class="speed-value" id="thrust-speed">0%</span>
                </div>
                <div class="group-buttons">
                    <button class="group-btn start-btn" onclick="startGroup('thrust')">âš¡ BAÅLAT</button>
                    <button class="group-btn stop-btn" onclick="stopGroup('thrust')">â¹ DURDUR</button>
                </div>
            </div>

            <!-- System Controls -->
            <div class="system-controls">
                <h4 class="controls-title">ğŸ”§ Sistem Kontrolleri</h4>
                <div class="control-grid">
                    <button class="system-btn relay-brake-on" onclick="controlRelayBrake('on')">
                        ğŸ”Œ RÃ–LE AKTÄ°F
                    </button>
                    <button class="system-btn relay-brake-off" onclick="controlRelayBrake('off')">
                        âš¡ RÃ–LE PASÄ°F
                    </button>
                    <button class="system-btn brake-on" onclick="controlBrake('on')">
                        ğŸ”’ SW BRAKE ON
                    </button>
                    <button class="system-btn brake-off" onclick="controlBrake('off')">
                        ğŸ”“ SW BRAKE OFF
                    </button>
                    <button class="system-btn emergency-btn" onclick="emergencyStop()">
                        ğŸš¨ ACÄ°L DURDURMA
                    </button>
                </div>
            </div>
        </div>

        <!-- Right Panel - Enhanced System Info + Reflector Monitoring -->
        <div class="control-panel">
            <div class="panel-title">ğŸ“Š Sistem Bilgileri + Reflektor MonitÃ¶r</div>
            
            <!-- ENHANCED Temperature Info Section -->
            <div class="info-section">
                <h4 class="section-title">ğŸŒ¡ï¸ Ã‡IFT SensÃ¶r DetaylarÄ±</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">SensÃ¶r 1</div>
                        <div class="info-value temp-value" id="detailed-sensor1-temp">25.0Â°C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">SensÃ¶r 2</div>
                        <div class="info-value temp-value" id="detailed-sensor2-temp">25.0Â°C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">GÃ¼venlik Max</div>
                        <div class="info-value temp-value" id="detailed-safety-temp">25.0Â°C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Fark</div>
                        <div class="info-value" id="detailed-temp-diff">0.0Â°C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">S1 Max</div>
                        <div class="info-value temp-value" id="detailed-sensor1-max">25.0Â°C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">S2 Max</div>
                        <div class="info-value temp-value" id="detailed-sensor2-max">25.0Â°C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Redundancy</div>
                        <div class="info-value" id="detailed-redundancy-status">Ã‡ift Aktif</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Update Hz</div>
                        <div class="info-value" id="temp-update-frequency">0.0 Hz</div>
                    </div>
                </div>
            </div>
            
            <!-- NEW: ENHANCED Reflector Monitoring Section -->
            <div class="info-section">
                <h4 class="section-title">ğŸ“ Reflektor Sistem MonitÃ¶rÃ¼</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Toplam SayÄ±m</div>
                        <div class="info-value reflector-value" id="monitor-reflector-count">0</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">SensÃ¶r VoltajÄ±</div>
                        <div class="info-value voltage-value" id="monitor-reflector-voltage">5.00V</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ortalama HÄ±z</div>
                        <div class="info-value speed-value" id="monitor-avg-speed">0.0/dk</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">AnlÄ±k HÄ±z</div>
                        <div class="info-value speed-value" id="monitor-instant-speed">0.0/dk</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Okuma FrekansÄ±</div>
                        <div class="info-value freq-value" id="monitor-read-freq">0.0 Hz</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Sistem Durumu</div>
                        <div class="info-value system-value" id="monitor-system-status">Aktif</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Oturum SayÄ±mÄ±</div>
                        <div class="info-value session-value" id="monitor-session-count">0</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ã‡alÄ±ÅŸma SÃ¼resi</div>
                        <div class="info-value runtime-value" id="monitor-runtime">0.0dk</div>
                    </div>
                </div>
            </div>
            
            <!-- Performance Info -->
            <div class="info-section">
                <h4 class="section-title">ğŸ“ˆ Sistem PerformansÄ±</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Toplam RPM</div>
                        <div class="info-value rpm-value" id="total-rpm">0</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">GÃ¼Ã§ TÃ¼ketimi</div>
                        <div class="info-value power-value" id="power-usage">0W</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Aktif Motorlar</div>
                        <div class="info-value motor-value" id="active-motors">0/6</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">RÃ¶le Durumu</div>
                        <div class="info-value relay-value" id="relay-brake-status">Pasif</div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Connection Status with Reflector -->
            <div class="info-section">
                <h4 class="section-title">ğŸ”— BaÄŸlantÄ± Durumu</h4>
                <div class="connection-status">
                    <div class="connection-item">
                        <span class="connection-label">Backend:</span>
                        <div class="connection-dot" id="backend-status"></div>
                        <span class="connection-text" id="backend-text">BaÄŸlantÄ±sÄ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">Arduino:</span>
                        <div class="connection-dot" id="arduino-connection-status"></div>
                        <span class="connection-text" id="arduino-text">BaÄŸlantÄ±sÄ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">SensÃ¶r 1:</span>
                        <div class="connection-dot" id="sensor1-dot"></div>
                        <span class="connection-text" id="sensor1-status-text">BaÄŸlantÄ±sÄ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">SensÃ¶r 2:</span>
                        <div class="connection-dot" id="sensor2-dot"></div>
                        <span class="connection-text" id="sensor2-status-text">BaÄŸlantÄ±sÄ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">Reflektor:</span>
                        <div class="connection-dot" id="reflector-dot"></div>
                        <span class="connection-text" id="reflector-connection-text">BaÄŸlantÄ±sÄ±z</span>
                    </div>
                    <div class="connection-item">
                        <span class="connection-label">Son GÃ¼ncelleme:</span>
                        <span class="update-time" id="last-update">--:--:--</span>
                    </div>
                </div>
                
                <div class="connection-controls">
                    <button class="connection-btn test-btn" onclick="testConnection()">
                        ğŸ” BAÄLANTI TESTÄ°
                    </button>
                    <button class="connection-btn reconnect-btn" onclick="reconnectArduino()">
                        ğŸ”„ YENÄ°DEN BAÄLAN
                    </button>
                </div>
            </div>

            <!-- Command Log -->
            <div class="info-section">
                <h4 class="section-title">ğŸ“ Komut GeÃ§miÅŸi</h4>
                <div id="command-log" class="command-log">
                    <div class="log-entry">DUAL sensÃ¶r + reflektor sistemi baÅŸlatÄ±lÄ±yor...</div>
                </div>
            </div>

            <!-- Enhanced System Stats -->
            <div class="info-section">
                <h4 class="section-title">ğŸ“Š Sistem Ä°statistikleri</h4>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Komutlar:</span>
                        <span class="stat-value" id="total-commands">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Hatalar:</span>
                        <span class="stat-value error-stat" id="total-errors">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Uptime:</span>
                        <span class="stat-value" id="uptime">0s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Port:</span>
                        <span class="stat-value" id="arduino-port">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Stop Button -->
    <div class="emergency-stop" onclick="emergencyStop()">
        <div class="emergency-icon">ğŸš¨</div>
        <div class="emergency-text">STOP</div>
    </div>

    <!-- ENHANCED Temperature Emergency Warning with Reflector Data -->
    <div class="temperature-emergency-warning" id="temperature-emergency-warning" style="display: none;">
        <div class="warning-content">
            <div class="warning-icon">ğŸŒ¡ï¸ğŸš¨</div>
            <div class="warning-text">
                <div class="warning-title">Ã‡IFT SENSÃ–R SICAKLIK ALARMI!</div>
                <div class="warning-subtitle">Sistem gÃ¼venlik nedeniyle durduruldu</div>
                <div class="warning-temp-details">
                    <div class="warning-temp-item">
                        <div class="warning-temp-label">SensÃ¶r 1</div>
                        <div class="warning-temp-value" id="warning-temp1-value">--Â°C</div>
                    </div>
                    <div class="warning-temp-item">
                        <div class="warning-temp-label">SensÃ¶r 2</div>
                        <div class="warning-temp-value" id="warning-temp2-value">--Â°C</div>
                    </div>
                    <div class="warning-temp-item">
                        <div class="warning-temp-label">Maximum</div>
                        <div class="warning-temp-value" id="warning-temp-max-value">--Â°C</div>
                    </div>
                </div>
                <div class="warning-reflector-info">
                    <div class="warning-subtitle">Son Reflektor Durumu:</div>
                    <div class="warning-reflector-item">
                        <span class="warning-reflector-label">Final SayÄ±m:</span>
                        <span class="warning-reflector-value" id="warning-reflector-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Reflector Detail Modal -->
    <div class="reflector-detail-modal" id="reflector-detail-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ğŸ“ Omron Reflektor Detay Ä°statistikleri</h3>
                <span class="modal-close" onclick="hideReflectorDetails()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4>GerÃ§ek ZamanlÄ± Veriler</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Toplam SayÄ±m:</span>
                        <span class="modal-detail-value" id="modal-reflector-count">0</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">SensÃ¶r VoltajÄ±:</span>
                        <span class="modal-detail-value" id="modal-reflector-voltage">5.00V</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">AlgÄ±lama Durumu:</span>
                        <span class="modal-detail-value" id="modal-detection-state">Temiz</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Ortalama HÄ±z:</span>
                        <span class="modal-detail-value" id="modal-avg-speed">0.0 ref/dk</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">AnlÄ±k HÄ±z:</span>
                        <span class="modal-detail-value" id="modal-instant-speed">0.0 ref/dk</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Max HÄ±z:</span>
                        <span class="modal-detail-value" id="modal-max-speed">0.0 ref/dk</span>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>Performans & Ä°statistikler</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Oturum SayÄ±mÄ±:</span>
                        <span class="modal-detail-value" id="modal-session-count">0</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">GÃ¼nlÃ¼k SayÄ±m:</span>
                        <span class="modal-detail-value" id="modal-daily-count">0</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Ã‡alÄ±ÅŸma SÃ¼resi:</span>
                        <span class="modal-detail-value" id="modal-runtime">0.0 dakika</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">AlgÄ±lama OranÄ±:</span>
                        <span class="modal-detail-value" id="modal-detection-rate">0.0/dk</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Okuma FrekansÄ±:</span>
                        <span class="modal-detail-value" id="modal-read-freq">0.0 Hz</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Sistem Durumu:</span>
                        <span class="modal-detail-value" id="modal-system-active">Aktif</span>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>Kalibrasyon & KonfigÃ¼rasyon</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">AlgÄ±lama EÅŸiÄŸi:</span>
                        <span class="modal-detail-value" id="modal-detect-threshold">4.64V</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">BÄ±rakma EÅŸiÄŸi:</span>
                        <span class="modal-detail-value" id="modal-release-threshold">4.89V</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Son Kalibrasyon:</span>
                        <span class="modal-detail-value" id="modal-last-calibration">HenÃ¼z yapÄ±lmadÄ±</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Min Voltaj:</span>
                        <span class="modal-detail-value" id="modal-min-voltage">0.0V</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Max Voltaj:</span>
                        <span class="modal-detail-value" id="modal-max-voltage">5.0V</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Ortalama Voltaj:</span>
                        <span class="modal-detail-value" id="modal-avg-voltage">5.0V</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Sensor Detail Modal with Reflector Correlation -->
    <div class="sensor-detail-modal" id="sensor-detail-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ğŸŒ¡ï¸ Ã‡IFT SensÃ¶r + Reflektor Korelasyon DetaylarÄ±</h3>
                <span class="modal-close" onclick="hideSensorDetails()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4>SensÃ¶r 1 (Pin 8) - Primary</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Mevcut SÄ±caklÄ±k:</span>
                        <span class="modal-detail-value" id="modal-sensor1-temp">25.0Â°C</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Maximum SÄ±caklÄ±k:</span>
                        <span class="modal-detail-value" id="modal-sensor1-max">25.0Â°C</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">BaÄŸlantÄ± Durumu:</span>
                        <span class="modal-detail-value" id="modal-sensor1-connection">BaÄŸlÄ±</span>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>SensÃ¶r 2 (Pin 13) - Secondary</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Mevcut SÄ±caklÄ±k:</span>
                        <span class="modal-detail-value" id="modal-sensor2-temp">25.0Â°C</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Maximum SÄ±caklÄ±k:</span>
                        <span class="modal-detail-value" id="modal-sensor2-max">25.0Â°C</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">BaÄŸlantÄ± Durumu:</span>
                        <span class="modal-detail-value" id="modal-sensor2-connection">BaÄŸlÄ±</span>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>GÃ¼venlik & Redundancy</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">GÃ¼venlik SÄ±caklÄ±ÄŸÄ±:</span>
                        <span class="modal-detail-value" id="modal-safety-temp">25.0Â°C</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">SensÃ¶r FarkÄ±:</span>
                        <span class="modal-detail-value" id="modal-temp-diff">0.0Â°C</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Update FrekansÄ±:</span>
                        <span class="modal-detail-value" id="modal-temp-update-freq">0.0 Hz</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Redundancy Status:</span>
                        <span class="modal-detail-value" id="modal-redundancy">Ã‡ift Aktif</span>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>Reflektor Korelasyonu</h4>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Reflektor SayÄ±mÄ±:</span>
                        <span class="modal-detail-value" id="modal-correlation-count">0</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">HÄ±z:</span>
                        <span class="modal-detail-value" id="modal-correlation-speed">0.0 ref/dk</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">SÄ±c./HÄ±z OranÄ±:</span>
                        <span class="modal-detail-value" id="modal-temp-speed-ratio">0.0</span>
                    </div>
                    <div class="modal-detail-item">
                        <span class="modal-detail-label">Sistem YÃ¼kÃ¼:</span>
                        <span class="modal-detail-value" id="modal-system-load">Normal</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <span class="notification-icon" id="notification-icon">â„¹ï¸</span>
            <span class="notification-message" id="notification-message">Mesaj</span>
        </div>
        <button class="notification-close" onclick="closeNotification()">Ã—</button>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">DUAL sensÃ¶r + reflektor sistemi baÅŸlatÄ±lÄ±yor...</div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>